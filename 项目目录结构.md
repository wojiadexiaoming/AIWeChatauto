
# 微信公众号AI发布系统 - 项目目录结构

```
微信公众号AI发布系统/
├── attached_assets/                    # 示例脚本和配置文件目录
│   ├── 1_1752195577025.py             # 微信API测试脚本
│   ├── 2_1752195577025.py             # 微信API操作脚本
│   ├── access_token_info_1752195577025.json  # 访问令牌信息示例
│   ├── add_draft_1752195577025.py     # 添加草稿的独立脚本（与services/draft_service.py关联）
│   ├── publish_draft_1752195577025.py # 发布草稿的独立脚本（与services/draft_service.py关联）
│   ├── upload_result_1752195577025.json # 上传结果示例
│   ├── 全局错误码_1752195577025.md     # 微信API错误码参考文档
│   ├── 单独脚本参考_1752195485406.zip  # 独立脚本参考包
│   ├── 发布草稿_1752195577025.md       # 发布草稿操作文档
│   └── 新增草稿_1752195577025.md       # 新增草稿操作文档
│
├── cache/                             # 缓存目录
│   └── .gitkeep                       # Git保持目录文件
│
├── config/                            # 配置模块目录
│   └── app_config.py                  # 应用配置类（被所有services使用）
│
├── controllers/                       # 控制器层目录
│   ├── article_controller.py          # 文章控制器（调用services/gemini_service.py, services/image_service.py, services/draft_service.py）
│   └── config_controller.py           # 配置控制器（调用services/config_service.py）
│
├── logs/                              # 日志目录
│   ├── .gitkeep                       # Git保持目录文件
│   └── app_20250711.log              # 应用日志文件（按日期命名）
│
├── services/                          # 服务层目录
│   ├── config_service.py              # 配置服务（管理config.json，被所有controllers使用）
│   ├── draft_service.py               # 草稿服务（调用wechat_service.py进行草稿操作）
│   ├── gemini_service.py              # Gemini AI服务（与Google AI API交互）
│   ├── image_service.py               # 图像服务（调用gemini_service.py生成图片）
│   └── wechat_service.py              # 微信服务（与微信公众号API交互）
│
├── static/                            # 静态资源目录
│   ├── css/                           # 样式文件目录
│   │   ├── components.css             # 组件样式（被templates/index.html引用）
│   │   ├── layout.css                 # 布局样式（被templates/index.html引用）
│   │   └── style.css                  # 基础样式文件
│   └── js/                            # JavaScript文件目录
│       └── app.js                     # 前端应用逻辑（与所有API端点交互）
│
├── templates/                         # 模板目录
│   └── index.html                     # 主页面模板（引用static/下的所有资源）
│
├── .replit                           # Replit配置文件（定义部署和运行配置）
├── app.py                            # 旧版应用入口（已废弃，被app_new.py替代）
├── app_new.py                        # 新版Flask应用主文件（注册所有controllers路由）
├── config.json                       # 运行时配置文件（由services/config_service.py管理）
├── config_manager.py                 # 旧版配置管理器（已废弃，被services/config_service.py替代）
├── gemini_service.py                 # 旧版Gemini服务（已废弃，被services/gemini_service.py替代）
├── main.py                           # 应用启动入口（导入app_new.py中的app）
├── pyproject.toml                    # Python项目配置文件（定义依赖关系）
├── replit.md                         # 项目说明文档
├── uv.lock                           # UV包管理器锁定文件
└── wechat_api.py                     # 旧版微信API文件（已废弃，被services/wechat_service.py替代）
```

## 文件关联关系说明

### 核心架构关系
- `main.py` → `app_new.py` → `controllers/` → `services/`
- 前端：`templates/index.html` → `static/js/app.js` → API endpoints

### 服务层依赖关系
- `config_service.py` ← 被所有其他服务依赖
- `wechat_service.py` ← 被 `draft_service.py` 依赖
- `gemini_service.py` ← 被 `image_service.py` 和 `article_controller.py` 依赖

### 控制器层关系
- `config_controller.py` → `config_service.py`
- `article_controller.py` → `config_service.py`, `gemini_service.py`, `image_service.py`, `draft_service.py`

### 前端资源关系
- `index.html` → 引用所有 `static/css/` 和 `static/js/` 文件
- `app.js` → 调用所有 `/api/` 端点

### 配置文件关系
- `config.json` ← 由 `config_service.py` 读写
- `app_config.py` ← 被所有服务导入
- `.replit` → 定义应用部署配置
